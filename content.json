{"meta":{"title":"kayleeWei","subtitle":null,"description":"learning FE","author":"kayleeWei","url":"https://kayleeWei.github.io","root":"/"},"pages":[{"title":"404","date":"2019-09-09T03:17:10.994Z","updated":"2019-09-09T03:17:10.994Z","comments":true,"path":"404.html","permalink":"https://kayleeWei.github.io/404.html","excerpt":"","text":""},{"title":"about","date":"2019-09-06T04:56:50.000Z","updated":"2019-09-09T03:17:10.993Z","comments":true,"path":"about/index.html","permalink":"https://kayleeWei.github.io/about/index.html","excerpt":"","text":""}],"posts":[{"title":"è§£å†³iosæµè§ˆå™¨ä¸­clickç‚¹å‡»åé¡µé¢é—ªåŠ¨çš„é—®é¢˜","slug":"è§£å†³iosæµè§ˆå™¨ä¸­clickç‚¹å‡»åé¡µé¢é—ªåŠ¨çš„é—®é¢˜","date":"2019-12-09T06:49:30.000Z","updated":"2019-12-09T06:51:04.972Z","comments":true,"path":"2019/12/09/è§£å†³iosæµè§ˆå™¨ä¸­clickç‚¹å‡»åé¡µé¢é—ªåŠ¨çš„é—®é¢˜/","link":"","permalink":"https://kayleeWei.github.io/2019/12/09/è§£å†³iosæµè§ˆå™¨ä¸­clickç‚¹å‡»åé¡µé¢é—ªåŠ¨çš„é—®é¢˜/","excerpt":"","text":"è§£å†³iosæµè§ˆå™¨ä¸­clickç‚¹å‡»åé¡µé¢é—ªåŠ¨çš„é—®é¢˜ç°è±¡ï¼šåœ¨iosæµè§ˆå™¨ä¸­çš„é¡µé¢ï¼Œç‚¹å‡»é¡µé¢åå‡ºç°domèƒŒæ™¯é—ªåŠ¨ï¼ˆç°è‰²åŠé€æ˜çš„èƒŒæ™¯ï¼‰ è§£å†³æ–¹æ³•ï¼šä¸ºé—ªåŠ¨domæ·»åŠ ä»¥ä¸‹cssè§£å†³ï¼Œ å°†iosé»˜è®¤ç‚¹å‡»äº¤äº’æ•ˆæœçš„é€æ˜åº¦è®¾ä¸º0 12345.class&#123; -webkit-tap-highlight-color:transparent; //æ–¹æ³•ä¸€ -webkit-tap-highlight-color: rgba(0, 0, 0, 0); //æ–¹æ³•äºŒ tap-highlight-color: rgba(0, 0, 0, 0);//æ–¹æ³•ä¸‰&#125;","categories":[{"name":"FE","slug":"FE","permalink":"https://kayleeWei.github.io/categories/FE/"}],"tags":[{"name":"ios","slug":"ios","permalink":"https://kayleeWei.github.io/tags/ios/"}]},{"title":"éƒ¨åˆ†æµè§ˆå™¨åœ¨postè¯·æ±‚å¤´éƒ¨æ·»åŠ origin: null","slug":"postè¯·æ±‚å¤´éƒ¨origin-nullè¸©å‘","date":"2019-09-10T11:51:46.000Z","updated":"2019-09-11T02:24:01.189Z","comments":true,"path":"2019/09/10/postè¯·æ±‚å¤´éƒ¨origin-nullè¸©å‘/","link":"","permalink":"https://kayleeWei.github.io/2019/09/10/postè¯·æ±‚å¤´éƒ¨origin-nullè¸©å‘/","excerpt":"","text":"ç°è±¡æè¿°ï¼šåœ¨éƒ¨åˆ†å®‰å“æ‰‹æœºçš„UCæµè§ˆå™¨ã€QQæµè§ˆå™¨å’Œè‡ªå¸¦æµè§ˆå™¨ä¸­ï¼Œå½“å‘èµ·postè¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ç»™è¯·æ±‚å¤´éƒ¨å¢åŠ origin: nullï¼Œè€Œåç«¯å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæ— æ³•å¤„ç†originï¼šnullçš„è¯·æ±‚å¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚ è§£å†³æ–¹æ³•ï¼šæ–¹æ³•ä¸€ï¼šåœ¨clientå’Œserverä¹‹é—´åŠ ä¸€å±‚è¯·æ±‚è½¬å‘ï¼Œä»¥nodeä¸ºä¾‹ï¼Œé€šè¿‡nodeå±‚è½¬å‘javaè¯·æ±‚åœ¨nodeå±‚è½¬å‘javaè¯·æ±‚æ—¶ï¼Œæ‰‹åŠ¨å¢åŠ origin: â€˜xxxâ€™å­—æ®µï¼Œä»¥expressä¸ºä¾‹ï¼š 1234567891011121314151617181920212223242526// nodeå±‚router.post(`/api/*`, async (req, res) =&gt; &#123; const url = req.originalUrl.substring(req.originalUrl.indexOf(`/api/`) + 5); const cookies = req.cookies; const resp = await fetch('xxxx(è¯·æ±‚çš„url)', &#123; method: 'post', body: queryString.stringify(Object.assign(&#123;&#125;, req.body)), headers: &#123; 'Content-Type': 'application/x-www-form-urlencoded', origin: 'https://xxx(éœ€è¦è®¾ç½®çš„origin)', // æ·»åŠ origin cookie: Object.keys(cookies).map(c =&gt; `$&#123;c&#125;=$&#123;cookies[c]&#125;`).join(';'), &#125;, &#125;); const retJson = await resp.json(); res.send(retJson);&#125;)// è¯·æ±‚nodeæ¥å£const req = fetch(`$&#123;å½“å‰å‰ç«¯åŸŸå&#125;/api/$&#123;æ¥å£å&#125;`, &#123; method: 'POST', ...&#125;)req.then((res) =&gt; &#123; ...&#125;) ä»å®‰å…¨è§’åº¦è€ƒè™‘ï¼Œä¸æ¨èä»nodeå±‚è½¬å‘æ—¶æ·»åŠ originæ–¹æ³•ï¼Œå¯å‚è€ƒæ–¹æ³•äºŒ æ–¹æ³•äºŒï¼šè¯·æ±‚java APIæ—¶è¯·æ±‚å¤´éƒ¨å¢åŠ referrerPolicy: â€˜originâ€™ä¸ºä»€ä¹ˆæœ‰äº›æµè§ˆå™¨ä¼šå°†originè®¾ç½®ä¸ºnullå‘¢ï¼Ÿæ ¹æ®fetchæ–‡æ¡£ï¼Œå¦‚æœè¯·æ±‚ä¸æ˜¯getæˆ–è€…headï¼Œåˆ™referrerPolicyè®¾ç½®ä¸ºâ€™no-referrerâ€™æ—¶ã€‚ä¼šå°†originè®¾ç½®ä¸ºnullï¼Œå› æ­¤å°†referrerPolicyè®¾ç½®ä¸ºâ€™originâ€™ï¼Œå°±ä¸ä¼šå‡ºç°originï¼šnullçš„æƒ…å†µï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š 123456// è¯·æ±‚java APIconst req = fetch(`$&#123;java API&#125;`, &#123; method: 'POST', referrerPolicy: 'origin', ...&#125;)","categories":[{"name":"FE","slug":"FE","permalink":"https://kayleeWei.github.io/categories/FE/"}],"tags":[{"name":"post","slug":"post","permalink":"https://kayleeWei.github.io/tags/post/"},{"name":"fetch","slug":"fetch","permalink":"https://kayleeWei.github.io/tags/fetch/"},{"name":"origin","slug":"origin","permalink":"https://kayleeWei.github.io/tags/origin/"},{"name":"referrerPolicy","slug":"referrerPolicy","permalink":"https://kayleeWei.github.io/tags/referrerPolicy/"}]},{"title":"å½“inputæ ‡ç­¾çš„maxlengthå±æ€§é‡ä¸Šemoji","slug":"inputæ ‡ç­¾çš„maxlength","date":"2019-09-06T06:25:42.000Z","updated":"2019-09-09T03:17:10.993Z","comments":true,"path":"2019/09/06/inputæ ‡ç­¾çš„maxlength/","link":"","permalink":"https://kayleeWei.github.io/2019/09/06/inputæ ‡ç­¾çš„maxlength/","excerpt":"","text":"é™åˆ¶è¾“å…¥æ¡†çš„å­—æ•°æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨input/textareaæ ‡ç­¾çš„maxlengthå±æ€§æ¥é™åˆ¶è¾“å…¥å­—æ•°ã€‚ä½†å½“ç”¨æˆ·è¾“å…¥emojiå­—ç¬¦æ—¶ï¼Œåœ¨ä¸åŒç«¯ä¸­maxlengthå±æ€§è®¡ç®—å‡ºçš„emojié•¿åº¦å´ä¸ä¸€è‡´ã€‚jså’Œå®‰å“ä¸Šä¸€ä¸ªemojiéƒ½ç®—ä½œ2ä¸ªå­—ç¬¦é•¿åº¦ï¼Œè€Œåœ¨iosä¸Šä¸º1ä¸ªå­—ç¬¦é•¿åº¦ã€‚ ç”¨jsè€Œémaxlengthé™åˆ¶å­—æ•°ä¸ºäº†è®©é™åˆ¶å­—æ•°åœ¨ä¸åŒç«¯ä¸Šå¾—åˆ°ç»Ÿä¸€ï¼Œå¯ä»¥ç”¨jsé™åˆ¶å­—æ•°å–ä»£maxlengthå±æ€§ï¼Œä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å°†è¾“å…¥å­—ç¬¦ä¸²éƒ½è½¬ä¸ºæ•°ç»„è®¡ç®—é•¿åº¦ï¼Œè¿™æ ·emojiåœ¨ä¸åŒç«¯é•¿åº¦éƒ½æ˜¯1ï¼š 123const inputValue = 'ğŸ‘¿ğŸ˜„other';const inputArr = [...inputValue]; // [\"ğŸ‘¿\", \"ğŸ˜„\", \"o\", \"t\", \"h\", \"e\", \"r\"]console.log(inputArr.length) // 7 å½“è¶…å‡ºé™åˆ¶é•¿åº¦æ—¶ï¼Œæˆ‘ä»¬å°±å°†å­—ç¬¦ä¸²æˆªæ–­ï¼ˆsliceç­‰æ“ä½œï¼‰ï¼Œåªå±•ç¤ºé™åˆ¶å­—æ•°å†…çš„å†…å®¹ã€‚ ä½¿ç”¨jsé™åˆ¶è¾“å…¥é•¿åº¦å¸¦æ¥çš„é—®é¢˜ä½¿ç”¨ä¸­æ–‡è¾“å…¥æ³•æ—¶çš„å­—ç¬¦æˆªæ–­é—®é¢˜ä½†ç”¨jsé™åˆ¶é•¿åº¦æ—¶ï¼Œä¼šå‡ºç°å¦‚å›¾é—®é¢˜ï¼š å‡è®¾é™åˆ¶é•¿åº¦ä¸º2ï¼Œæˆ‘ä»¬æƒ³è¾“å…¥â€œä¾‹å­â€è¿™ä¸¤ä¸ªå­—ï¼Œåœ¨ä½¿ç”¨ä¸­æ–‡è¾“å…¥æ³•æ—¶â€œliâ€å¤„å°±ä¼šåˆ¤æ–­å·²ç»è¾¾åˆ°2ä¸ªå­—ç¬¦ï¼Œå› æ­¤åœ¨è¾“å…¥åŸŸå†…åªèƒ½å±•ç¤ºâ€œliâ€ï¼Œä¸èƒ½ç»§ç»­è¾“å…¥ã€‚ è§£å†³åŠæ³• â€” compositionEventä½¿ç”¨compositionEventäº‹ä»¶æ¥ç›‘å¬ä¸­æ–‡è¾“å…¥çš„è¿‡ç¨‹ï¼ŒcompositionEventåŒ…å«3ä¸ªäº‹ä»¶ï¼š compositionStartï¼šè¾“å…¥å¼€å§‹ compositionUpdateï¼šè¾“å…¥å˜åŒ–ï¼Œæ²¡æœ‰ç‚¹é€‰ä¸­æ–‡ä¹‹å‰è§¦å‘å¤šæ¬¡ compositionEndï¼šç‚¹é€‰ä¸­æ–‡ï¼Œè¾“å…¥ç»“æŸ æˆ‘ä»¬å¯ä»¥ç›‘å¬compositionStartå’ŒcompositionEndäº‹ä»¶ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½è¡¨ç¤ºç”¨æˆ·æ˜¯å¦æ­£åœ¨è¾“å…¥ã€‚å¦‚æœæ­£åœ¨è¾“å…¥ï¼Œå°±ä¸åˆ¤æ–­æ˜¯å¦è¶…å‡ºé™åˆ¶é•¿åº¦ï¼Œç­‰è¾“å…¥å®Œæ¯•å†æ ¹æ®é™åˆ¶é•¿åº¦æˆªå–å­—ç¬¦ä¸²ã€‚ Example123456789101112131415161718192021222324252627282930313233handleChange = (e, limitNum) =&gt; &#123; const valueArr = [...event.target.value]; const isSlice = valueArr.length &gt; limitNum &amp;&amp; this.isComposing; this.setState(&#123; text: isSlice ? valueArr.join('') : valueArr.slice(0, limitNum).join('') &#125;);&#125; // ç›‘å¬è¾“å…¥æ³•onComposition = (e) =&gt; &#123; if (e.type === 'compositionstart') &#123; this.isComposing = true; &#125; else if (e.type === 'compositionend') &#123; // åœæ­¢è¾“å…¥æ—¶æˆªå–é™å®šé•¿åº¦çš„å­—ç¬¦ä¸² this.isComposing = false; this.setState(&#123; text: [...this.state.text].slice(0, limitNum).join(''), &#125;) &#125;&#125; render() &#123; const &#123; text &#125; = this.state; ... return ( &lt;textarea value=&#123;text&#125; onChange=&#123;(e) =&gt; this.handleChange(e, limitNum)&#125; onCompositionStart=&#123;(e) =&gt; this.onComposition(e, limitNum)&#125; onCompositionEnd=&#123;(e) =&gt; this.onComposition(e, limitNum)) /&gt; )&#125;","categories":[{"name":"FE","slug":"FE","permalink":"https://kayleeWei.github.io/categories/FE/"}],"tags":[{"name":"HTML","slug":"HTML","permalink":"https://kayleeWei.github.io/tags/HTML/"},{"name":"react","slug":"react","permalink":"https://kayleeWei.github.io/tags/react/"}]}]}