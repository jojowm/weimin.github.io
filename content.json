{"meta":{"title":"kayleeWei","subtitle":null,"description":"learning FE","author":"kayleeWei","url":"https://kayleeWei.github.io","root":"/"},"pages":[{"title":"404","date":"2019-09-06T06:18:12.932Z","updated":"2019-09-06T06:18:12.932Z","comments":true,"path":"404.html","permalink":"https://kayleeWei.github.io/404.html","excerpt":"","text":""},{"title":"about","date":"2019-09-06T04:56:50.000Z","updated":"2019-09-06T04:57:20.092Z","comments":true,"path":"about/index.html","permalink":"https://kayleeWei.github.io/about/index.html","excerpt":"","text":""}],"posts":[{"title":"å½“inputæ ‡ç­¾","slug":"inputæ ‡ç­¾çš„maxlength","date":"2019-09-06T06:25:42.000Z","updated":"2019-09-06T11:36:38.436Z","comments":true,"path":"2019/09/06/inputæ ‡ç­¾çš„maxlength/","link":"","permalink":"https://kayleeWei.github.io/2019/09/06/inputæ ‡ç­¾çš„maxlength/","excerpt":"","text":"å½“inputæ ‡ç­¾çš„maxlengthå±æ€§é‡ä¸Šemojié™åˆ¶è¾“å…¥æ¡†çš„å­—æ•°æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨input/textareaæ ‡ç­¾çš„maxlengthå±æ€§æ¥é™åˆ¶è¾“å…¥å­—æ•°ã€‚ä½†å½“ç”¨æˆ·è¾“å…¥emojiå­—ç¬¦æ—¶ï¼Œåœ¨ä¸åŒç«¯ä¸­maxlengthå±æ€§è®¡ç®—å‡ºçš„emojié•¿åº¦å´ä¸ä¸€è‡´ã€‚jså’Œå®‰å“ä¸Šä¸€ä¸ªemojiéƒ½ç®—ä½œ2ä¸ªå­—ç¬¦é•¿åº¦ï¼Œè€Œåœ¨iosä¸Šä¸º1ä¸ªå­—ç¬¦é•¿åº¦ã€‚ ç”¨jsè€Œémaxlengthé™åˆ¶å­—æ•°ä¸ºäº†è®©é™åˆ¶å­—æ•°åœ¨ä¸åŒç«¯ä¸Šå¾—åˆ°ç»Ÿä¸€ï¼Œå¯ä»¥ç”¨jsé™åˆ¶å­—æ•°å–ä»£maxlengthå±æ€§ï¼Œä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å°†è¾“å…¥å­—ç¬¦ä¸²éƒ½è½¬ä¸ºæ•°ç»„è®¡ç®—é•¿åº¦ï¼Œè¿™æ ·emojiåœ¨ä¸åŒç«¯é•¿åº¦éƒ½æ˜¯1ï¼š 123const inputValue = 'ğŸ‘¿ğŸ˜„other';const inputArr = [...inputValue]; // [\"ğŸ‘¿\", \"ğŸ˜„\", \"o\", \"t\", \"h\", \"e\", \"r\"]console.log(inputArr.length) // 7 å½“è¶…å‡ºé™åˆ¶é•¿åº¦æ—¶ï¼Œæˆ‘ä»¬å°±å°†å­—ç¬¦ä¸²æˆªæ–­ï¼ˆsliceç­‰æ“ä½œï¼‰ï¼Œåªå±•ç¤ºé™åˆ¶å­—æ•°å†…çš„å†…å®¹ã€‚ ä½¿ç”¨jsé™åˆ¶è¾“å…¥é•¿åº¦å¸¦æ¥çš„é—®é¢˜ä½¿ç”¨ä¸­æ–‡è¾“å…¥æ³•æ—¶çš„å­—ç¬¦æˆªæ–­é—®é¢˜ä½†ç”¨jsé™åˆ¶é•¿åº¦æ—¶ï¼Œä¼šå‡ºç°å¦‚å›¾é—®é¢˜ï¼š å‡è®¾é™åˆ¶é•¿åº¦ä¸º2ï¼Œæˆ‘ä»¬æƒ³è¾“å…¥â€œä¾‹å­â€è¿™ä¸¤ä¸ªå­—ï¼Œåœ¨ä½¿ç”¨ä¸­æ–‡è¾“å…¥æ³•æ—¶â€œliâ€å¤„å°±ä¼šåˆ¤æ–­å·²ç»è¾¾åˆ°2ä¸ªå­—ç¬¦ï¼Œå› æ­¤åœ¨è¾“å…¥åŸŸå†…åªèƒ½å±•ç¤ºâ€œliâ€ï¼Œä¸èƒ½ç»§ç»­è¾“å…¥ã€‚ è§£å†³åŠæ³• â€” compositionEventä½¿ç”¨compositionEventäº‹ä»¶æ¥ç›‘å¬ä¸­æ–‡è¾“å…¥çš„è¿‡ç¨‹ï¼ŒcompositionEventåŒ…å«3ä¸ªäº‹ä»¶ï¼š compositionStartï¼šè¾“å…¥å¼€å§‹ compositionUpdateï¼šè¾“å…¥å˜åŒ–ï¼Œæ²¡æœ‰ç‚¹é€‰ä¸­æ–‡ä¹‹å‰è§¦å‘å¤šæ¬¡ compositionEndï¼šç‚¹é€‰ä¸­æ–‡ï¼Œè¾“å…¥ç»“æŸ æˆ‘ä»¬å¯ä»¥ç›‘å¬compositionStartå’ŒcompositionEndäº‹ä»¶ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½è¡¨ç¤ºç”¨æˆ·æ˜¯å¦æ­£åœ¨è¾“å…¥ã€‚å¦‚æœæ­£åœ¨è¾“å…¥ï¼Œå°±ä¸åˆ¤æ–­æ˜¯å¦è¶…å‡ºé™åˆ¶é•¿åº¦ï¼Œç­‰è¾“å…¥å®Œæ¯•å†æ ¹æ®é™åˆ¶é•¿åº¦æˆªå–å­—ç¬¦ä¸²ã€‚ Example123456789101112131415161718192021222324252627282930313233handleChange = (e, limitNum) =&gt; &#123; const valueArr = [...event.target.value]; const isSlice = valueArr.length &gt; limitNum &amp;&amp; this.isComposing; this.setState(&#123; text: isSlice ? valueArr.join('') : valueArr.slice(0, limitNum).join('') &#125;);&#125; // ç›‘å¬è¾“å…¥æ³•onComposition = (e) =&gt; &#123; if (e.type === 'compositionstart') &#123; this.isComposing = true; &#125; else if (e.type === 'compositionend') &#123; // åœæ­¢è¾“å…¥æ—¶æˆªå–é™å®šé•¿åº¦çš„å­—ç¬¦ä¸² this.isComposing = false; this.setState(&#123; text: [...this.state.text].slice(0, limitNum).join(''), &#125;) &#125;&#125; render() &#123; const &#123; text &#125; = this.state; ... return ( &lt;textarea value=&#123;text&#125; onChange=&#123;(e) =&gt; this.handleChange(e, limitNum)&#125; onCompositionStart=&#123;(e) =&gt; this.onComposition(e, limitNum)&#125; onCompositionEnd=&#123;(e) =&gt; this.onComposition(e, limitNum)) /&gt; )&#125;","categories":[{"name":"FE","slug":"FE","permalink":"https://kayleeWei.github.io/categories/FE/"}],"tags":[{"name":"HTML","slug":"HTML","permalink":"https://kayleeWei.github.io/tags/HTML/"}]}]}